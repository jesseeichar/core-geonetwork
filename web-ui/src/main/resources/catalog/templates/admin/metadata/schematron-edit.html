<h3>
    {{'metadataschemaValidate' | translate}}
</h3>
<p>
    {{ 'metadataschemaValidateDes' | translate}}
</p>

<div class="metadataValidation">
    <form  class="css-form" method="post" name="criteria" ng-submit="submit()" ng-controller="GnSchematronEditCriteriaController" novalidate>
        <div>
            <label>
                {{ 'schematron' | translate}}}} :
            </label>

            <select ng-model="formData.schematron" name="schematron" id="schematron" autofocus="autofocus" required="true"
                    ng-options="schematron as schematron.name group by schematron.schemaname for schematron in schematrons">
            </select>
        </div>
        <div class='container-fluid' ng-controller="GnSchematronEditorTypeAheadController">
            <label>
                {{'schematroncriteriagroup' | translate}} :
            </label>
            <input type="text" id="groupName" placeholder="{{'schematroncriteriagroup' | translate}}" required="true"
                   ng-model="formData.groupName" typeahead-editable="true"
                   typeahead-wait-ms="200"
                   typeahead-loading="loadingGroups"
                   typeahead="criteriagroup.label for criteriagroup in getCriteriaGroups($viewValue) | filter:$viewValue | limitTo:8" />
            <i ng-show="loadingGroups" class="glyphicon glyphicon-refresh"></i>
        </div>
        <div>
            <label>
                {{ 'xpathlabel' | translate}} :
            </label>
            <select ng-model="formData.type" name="type" id="xpathtype" required="true"
                    ng-options="type as type.name for type in schemasToCriteriaTypes[formData.schematron.schemaname]">
            </select>
        </div>

        <!--<script type="text/ng-template" id="customTemplate.html">-->
        <!--<a>-->
        <!--<span bind-html-unsafe="match.label | typeaheadHighlight:query"></span>-->
        <!--</a>-->
        <!--</script>-->

        <div class='container-fluid' ng-controller="TypeaheadCtrl">
            <label>
                {{ 'xpathvalue' | translate}} :
            </label>
            <input type="text" id="xpathValue" placeholder="{{ 'xpathvalue' | translate}}"
                   ng-model="formData.value" typeahead-editable="true"
                   typeahead-wait-ms="200"
                   typeahead-loading="loadingValues"
                   typeahead="value.value as value.label for value in getCriteriaValues($viewValue) | filter:$viewValue | limitTo:8" />
            <i ng-show="loadingValues" class="glyphicon glyphicon-refresh"></i>
            <div>
                <input id="addButton" type="submit" disabled="true"></input>
                <span class="glyphicon"></span>
            </div>
        </div>
    </form>
</div>